seed_everything: 42

fit:
  run_batch_size_finder: false
  batch_size_finder_mode: power
  run_lr_finder: false
  show_lr_plot: false

predict:
  out_dir: outputs/predictions
  ckpt_path: checkpoints/cvae.ckpt
  save_spectra: true
  spectra_format: csv
  spectra_subdir: spectra
  line_chart:
    out_dir: ${predict.out_dir}/charts
    start_nm: 400
    step_nm: 10
    class_names:
      - gv40_np35_soil25
      - gv20_np10_soil70
    custom_conditions:
      - [40, 35, 25]
      - [0.2, 0.1, 0.7]
    normalize_custom_conditions: true

trainer:
  default_root_dir: outputs
  callbacks:
    - class_path: callbacks.predict_line_charts.PredictLineCharts
      init_args:
        out_dir: ${predict.line_chart.out_dir}
        start_nm: ${predict.line_chart.start_nm}
        step_nm: ${predict.line_chart.step_nm}
        class_names: ${predict.line_chart.class_names}
        custom_conditions: ${predict.line_chart.custom_conditions}
        normalize_custom_conditions: ${predict.line_chart.normalize_custom_conditions}
        save_spectra: ${predict.save_spectra}
        spectra_format: ${predict.spectra_format}
        spectra_subdir: ${predict.spectra_subdir}

model:
  input_dim: 210
  condition_dim: 3
  latent_dim: 32
  hidden_dims: [512, 256, 128]
  dropout: 0.1
  loss_name: beta_vae
  loss_params:
    beta: 4.0
    recon: mse
  lr: 0.001
  weight_decay: 0.0
  scheduler_cfg:
    name: cosine
    T_max: 200

data:
  csv_path: data/simpler_data_rwc.csv
  condition_columns:
    - gv_fraction
    - npv_fraction
    - soil_fraction
  spectral_range: [400, 2490, 10]
  batch_size: 256
  num_workers: 4
  splits: [0.8, 0.1, 0.1]
  seed: 42
  pin_memory: true

ckpt_path: ${predict.ckpt_path}
